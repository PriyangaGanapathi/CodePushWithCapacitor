(self.webpackChunkthin_javascript_layer=self.webpackChunkthin_javascript_layer||[]).push([[592],{592:(e,t,s)=>{"use strict";s.r(t),s.d(t,{HttpWeb:()=>d});var a=s(895);const o=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),n=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),c=()=>{const e=[],t={};if(!document.cookie)return e;const s=document.cookie.split(";")||[];for(const e of s){let[s,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=n(s).trim(),a=n(a).trim(),t[s]=a}const a=Object.entries(t);for(const[t,s]of a)e.push({key:t,value:s});return e},r=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{const t=Object.keys(e);return Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((s,a,o)=>(s[a]=e[t[o]],s)),{})})(e.headers)["content-type"]||"";if(a.includes("application/json"))s.body=JSON.stringify(e.data);else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,a]of Object.entries(e.data))t.set(s,a);s.body=t.toString()}else if(a.includes("multipart/form-data")||"object"==typeof e.data){const t=new FormData;for(const[s,a]of Object.entries(e.data))t.append(s,a);s.body=t}return s},i=async e=>{const t=r(e,e.webFetchExtra),s=((e,t=!0)=>e?Object.entries(e).reduce(((e,s)=>{const[a,o]=s;return`${e}&${a}=${t?encodeURIComponent(o):o}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,o=await fetch(a,t),n=o.headers.get("content-type")||"";let c,{responseType:i="text"}=e;switch(n.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":const e=await o.blob();c=await(async e=>new Promise(((t,s)=>{const a=new FileReader;a.onload=()=>{const e=a.result,s=e.substr(e.indexOf(",")+1);t(s)},a.onerror=e=>s(e),a.readAsDataURL(e)})))(e);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const d={};return o.headers.forEach(((e,t)=>{d[t]=e})),{data:c,headers:d,status:o.status,url:o.url}};class d extends a.Uw{constructor(){super(),this.request=async e=>i(e),this.get=async e=>(async e=>i(Object.assign(Object.assign({},e),{method:"GET"})))(e),this.post=async e=>(async e=>i(Object.assign(Object.assign({},e),{method:"POST"})))(e),this.put=async e=>(async e=>i(Object.assign(Object.assign({},e),{method:"PUT"})))(e),this.patch=async e=>(async e=>i(Object.assign(Object.assign({},e),{method:"PATCH"})))(e),this.del=async e=>(async e=>i(Object.assign(Object.assign({},e),{method:"DELETE"})))(e),this.getCookiesMap=async()=>{const e=c(),t={};for(const s of e)t[s.key]=s.value;return t},this.getCookies=async()=>({cookies:c()}),this.setCookie=async(e,t,s)=>((e,t,s={})=>{const a=o(e),n=o(t),c=`; expires=${(s.expires||"").replace("expires=","")}`,r=(s.path||"/").replace("path=","");document.cookie=`${a}=${n||""}${c}; path=${r}`})(e,t,s),this.getCookie=async e=>(e=>{const t=c();for(const s of t)if(s.key===e)return s;return{key:e,value:""}})(e),this.deleteCookie=async e=>(e=>{document.cookie=`${e}=; Max-Age=0`})(e),this.clearCookies=async()=>(()=>{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)})(),this.uploadFile=async e=>{const t=new FormData;t.append(e.name,e.blob||"undefined");const s=Object.assign(Object.assign({},e),{body:t,method:"POST"});return this.post(s)},this.downloadFile=async e=>{const t=r(e,e.webFetchExtra),s=await fetch(e.url,t);return{blob:await s.blob()}}}}}}]);