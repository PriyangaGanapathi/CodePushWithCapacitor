/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e,t,r={895:(e,t,r)=>{r.d(t,{Uw:()=>p,fo:()=>u});const n=["debug","error","info","log","trace","warn"],i=e=>{if("object"==typeof e)try{e=JSON.stringify(e)}catch(e){}return String(e)},o=e=>!!e&&("function"==typeof e.groupCollapsed||"function"==typeof e.groupEnd||"function"==typeof e.dir);var a;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(a||(a={}));class s extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const l=(e,t)=>{var r,l;const c=new Map;let d=Math.floor(134217728*Math.random()),u=null;e.androidBridge?u=t=>{var r;try{e.androidBridge.postMessage(JSON.stringify(t))}catch(t){null===(r=null==e?void 0:e.console)||void 0===r||r.error(t)}}:(null===(l=null===(r=e.webkit)||void 0===r?void 0:r.messageHandlers)||void 0===l?void 0:l.bridge)&&(u=t=>{var r,n;try{t.type=null!==(r=t.type)&&void 0!==r?r:"message",e.webkit.messageHandlers.bridge.postMessage(t)}catch(t){null===(n=null==e?void 0:e.console)||void 0===n||n.error(t)}}),t.handleWindowError=(e,r,n,i,o)=>{if(e.toLowerCase().indexOf("script error")>-1);else{const a={type:"js.error",error:{message:e,url:r,line:n,col:i,errorObject:JSON.stringify(o)}};null!==o&&t.handleError(o),u&&u(a)}return!1},t.DEBUG&&(window.onerror=t.handleWindowError),((e,t)=>{const r="ios"===t.getPlatform(),a=Object.assign({},e.console);if(e.console&&r)for(const r of n)e.console[r]=(...e)=>{const n=[...e];a[r](...n);try{t.toNative("Console","log",{level:r,message:n.map(i).join(" ")})}catch(e){a.error(e)}};var s;t.logToNative=(s=e.console,e=>{o(s)?(s.groupCollapsed("%cnative %c"+e.pluginId+"."+e.methodName+" (#"+e.callbackId+")","font-weight: lighter; color: gray","font-weight: bold; color: #000"),s.dir(e),s.groupEnd()):s.log("LOG TO NATIVE: ",e)}),t.logFromNative=(e=>t=>{if(o(e)){const r=!0===t.success?"font-style: italic; font-weight: lighter; color: gray":"font-style: italic; font-weight: lighter; color: red";e.groupCollapsed("%cresult %c"+t.pluginId+"."+t.methodName+" (#"+t.callbackId+")",r,"font-style: italic; font-weight: bold; color: #444"),!1===t.success?e.error(t.error):e.dir(t.data),e.groupEnd()}else!1===t.success?e.error("LOG FROM NATIVE",t.error):e.log("LOG FROM NATIVE",t.data)})(e.console)})(e,t),t.toNative=(r,n,i,o)=>{var a,s;try{if("function"==typeof u){let e="-1";!o||"function"!=typeof o.callback&&"function"!=typeof o.resolve||(e=String(++d),c.set(e,o));const a={callbackId:e,pluginId:r,methodName:n,options:i||{}};return t.DEBUG&&"Console"!==r&&t.logToNative(a),u(a),e}null===(a=null==e?void 0:e.console)||void 0===a||a.warn(`implementation unavailable for: ${r}`)}catch(t){null===(s=null==e?void 0:e.console)||void 0===s||s.error(t)}return null},t.fromNative=r=>{var n,i;t.DEBUG&&"Console"!==r.pluginId&&t.logFromNative(r);try{const i=c.get(r.callbackId);i?(r.error&&(r.error=Object.keys(r.error).reduce(((e,t)=>(e[t]=r.error[t],e)),new t.Exception(""))),"function"==typeof i.callback?r.success?i.callback(r.data):i.callback(null,r.error):"function"==typeof i.resolve&&(r.success?i.resolve(r.data):i.reject(r.error),c.delete(r.callbackId))):!r.success&&r.error&&(null===(n=null==e?void 0:e.console)||void 0===n||n.warn(r.error)),!1===r.save&&c.delete(r.callbackId)}catch(t){null===(i=null==e?void 0:e.console)||void 0===i||i.error(t)}delete r.data,delete r.error},"function"==typeof u?(t.nativeCallback=(e,r,n,i)=>("function"==typeof n&&(console.warn("Using a callback as the 'options' parameter of 'nativeCallback()' is deprecated."),i=n,n=null),t.toNative(e,r,n,{callback:i})),t.nativePromise=(e,r,n)=>new Promise(((i,o)=>{t.toNative(e,r,n,{resolve:i,reject:o})}))):(t.nativeCallback=()=>{throw new s("nativeCallback() not implemented",a.Unimplemented)},t.nativePromise=()=>Promise.reject(new s("nativePromise() not implemented",a.Unimplemented)))},c=e=>{var t,r;return e.androidBridge?"android":(null===(r=null===(t=e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===r?void 0:r.bridge)?"ios":"web"},d=(e=>e.Capacitor=(e=>{const t=e.Capacitor||{},r=t.Plugins=t.Plugins||{},n="string"==typeof e.WEBVIEW_SERVER_URL?e.WEBVIEW_SERVER_URL:"",i=()=>c(e),o=()=>"web"!==c(e),d=e=>{var r;return null===(r=t.PluginHeaders)||void 0===r?void 0:r.find((t=>t.name===e))},u=new Map;return t.convertFileSrc=e=>((e,t)=>{if("string"==typeof t){if(t.startsWith("/"))return e+"/_capacitor_file_"+t;if(t.startsWith("file://"))return e+t.replace("file://","/_capacitor_file_");if(t.startsWith("content://"))return e+t.replace("content:/","/_capacitor_content_")}return t})(n,e),t.getPlatform=i,t.getServerUrl=()=>n,t.handleError=t=>e.console.error(t),t.isNativePlatform=o,t.isPluginAvailable=e=>{const t=u.get(e);return!!(null==t?void 0:t.platforms.has(i()))||!!d(e)},t.logJs=(t,r)=>{switch(r){case"error":e.console.error(t);break;case"warn":e.console.warn(t);break;case"info":e.console.info(t);break;default:e.console.log(t)}},t.pluginMethodNoop=(e,t,r)=>Promise.reject(`${r} does not have an implementation of "${t}".`),t.registerPlugin=(e,n={})=>{const l=u.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=i(),p=d(e);let h;const g=r=>{let i;const o=(...o)=>{const l=(async()=>(!h&&c in n&&(h=h="function"==typeof n[c]?await n[c]():n[c]),h))().then((n=>{const l=((r,n)=>{var i;if(r)return null===(i=r[n])||void 0===i?void 0:i.bind(r);if(!p)throw new s(`"${e}" plugin is not implemented on ${c}`,a.Unimplemented);{const r=p.methods.find((e=>n===e.name));if(r)return"promise"===r.rtype?r=>t.nativePromise(e,n.toString(),r):(r,i)=>t.nativeCallback(e,n.toString(),r,i)}})(n,r);if(l){const e=l(...o);return i=null==e?void 0:e.remove,e}throw new s(`"${e}.${r}()" is not implemented on ${c}`,a.Unimplemented)}));return"addListener"===r&&(l.remove=async()=>i()),l};return o.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(o,"name",{value:r,writable:!1,configurable:!1}),o},y=g("addListener"),f=g("removeListener"),v=(e,t)=>{const r=y({eventName:e},t),n=async()=>{const n=await r;f({eventName:e,callbackId:n},t)},i=new Promise((e=>r.then((()=>e({remove:n})))));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()},i},m=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"addListener":return o()?v:y;case"removeListener":return f;default:return g(t)}}});return r[e]=m,u.set(e,{name:e,proxy:m,platforms:new Set([...Object.keys(n),...p?[c]:[]])}),m},t.Exception=s,t.DEBUG=!!t.DEBUG,l(e,t),((e,t)=>{const r=e.document,n=e.cordova;t.addListener=(r,n,i)=>{const o=t.nativeCallback(r,"addListener",{eventName:n},i);return{remove:async()=>{var a;null===(a=null==e?void 0:e.console)||void 0===a||a.debug("Removing listener",r,n),t.removeListener(r,o,n,i)}}},t.removeListener=(e,r,n,i)=>{t.nativeCallback(e,"removeListener",{callbackId:r,eventName:n},i)},t.createEvent=(e,t)=>{if(r){const n=r.createEvent("Events");if(n.initEvent(e,!1,!1),t&&"object"==typeof t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}return null},t.triggerEvent=(i,o,a)=>{a=a||{};const s=t.createEvent(i,a);if(s)if("document"===o){if(null==n?void 0:n.fireDocumentEvent)return n.fireDocumentEvent(i,a),!0;if(null==r?void 0:r.dispatchEvent)return r.dispatchEvent(s)}else{if("window"===o&&e.dispatchEvent)return e.dispatchEvent(s);if(null==r?void 0:r.querySelector){const e=r.querySelector(o);if(e)return e.dispatchEvent(s)}}return!1}})(e,t),((e,t)=>{const r=e.Ionic=e.Ionic||{},n=r.WebView=r.WebView||{},i=t.Plugins;n.getServerBasePath=e=>{var t;null===(t=null==i?void 0:i.WebView)||void 0===t||t.getServerBasePath().then((t=>{e(t.path)}))},n.setServerBasePath=e=>{var t;null===(t=null==i?void 0:i.WebView)||void 0===t||t.setServerBasePath({path:e})},n.persistServerBasePath=()=>{var e;null===(e=null==i?void 0:i.WebView)||void 0===e||e.persistServerBasePath()},n.convertFileSrc=e=>t.convertFileSrc(e)})(e,t),((e,t)=>{if(t.isNativePlatform()){e.cordova=e.cordova||{};const r=e.document,n=e.navigator;if(n&&(n.app=n.app||{},n.app.exitApp=()=>{t.nativeCallback("App","exitApp",{})}),r){const e=r.addEventListener;r.addEventListener=(...n)=>{const i=n[0],o=n[1];return"deviceready"===i&&o?Promise.resolve().then(o):"backbutton"===i&&t.Plugins.App&&t.Plugins.App.addListener("backButton",(()=>{})),e.apply(r,n)}}}t.platform=t.getPlatform(),t.isNative=t.isNativePlatform()})(e,t),t})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:{}),u=d.registerPlugin;d.Plugins;class p{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const n=async()=>this.removeListener(e,t),i=Promise.resolve({remove:n});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new d.Exception(e,a.Unimplemented)}unavailable(e="not available"){return new d.Exception(e,a.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}},75:(e,t,r)=>{t.Pe=t.rH=void 0;var n=r(639),i=function(){function e(){}return e.DeploymentSucceeded="DeploymentSucceeded",e.DeploymentFailed="DeploymentFailed",e}();t.rH=i;var o=function(){function e(e,t){this._publicPrefixUrl="v0.1/public/codepush/",this._httpRequester=e,this._serverUrl=t.serverUrl,"/"!==this._serverUrl.slice(-1)&&(this._serverUrl+="/"),this._appVersion=t.appVersion,this._clientUniqueId=t.clientUniqueId,this._deploymentKey=t.deploymentKey,this._ignoreAppVersion=t.ignoreAppVersion}return e.prototype.queryUpdateWithCurrentPackage=function(e,t){var r=this;if(!e||!e.appVersion)throw new n.CodePushPackageError("Calling common acquisition SDK with incorrect package");var i={deployment_key:this._deploymentKey,app_version:e.appVersion,package_hash:e.packageHash,is_companion:this._ignoreAppVersion,label:e.label,client_unique_id:this._clientUniqueId},o=this._serverUrl+this._publicPrefixUrl+"update_check?"+function(e){var t="",r=!0;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(r||(t+="&"),t+=encodeURIComponent(n)+"=",t+=encodeURIComponent(i)),r=!1}return t}(i);this._httpRequester.request(0,o,(function(e,i){if(e)t(e,null);else{if(200!==i.statusCode){var a;return a=0===i.statusCode?"Couldn't send request to "+o+", xhr.statusCode = 0 was returned. One of the possible reasons for that might be connection problems. Please, check your internet connection.":i.statusCode+": "+i.body,void t(new n.CodePushHttpError(a),null)}try{var s=JSON.parse(i.body).update_info}catch(e){return void t(e,null)}if(s)if(s.update_app_version)t(null,{updateAppVersion:!0,appVersion:s.target_binary_range});else if(s.is_available){var l={deploymentKey:r._deploymentKey,description:s.description,label:s.label,appVersion:s.target_binary_range,isMandatory:s.is_mandatory,packageHash:s.package_hash,packageSize:s.package_size,downloadUrl:s.download_url};t(null,l)}else t(null,null);else t(e,null)}}))},e.prototype.reportStatusDeploy=function(e,t,r,o,a){var s=this._serverUrl+this._publicPrefixUrl+"report_status/deploy",l={app_version:this._appVersion,deployment_key:this._deploymentKey};if(this._clientUniqueId&&(l.client_unique_id=this._clientUniqueId),e)switch(l.label=e.label,l.app_version=e.appVersion,t){case i.DeploymentSucceeded:case i.DeploymentFailed:l.status=t;break;default:return void(a&&a(t?new n.CodePushDeployStatusError('Unrecognized status "'+t+'".'):new n.CodePushDeployStatusError("Missing status argument."),null))}r&&(l.previous_label_or_app_version=r),o&&(l.previous_deployment_key=o),a="function"==typeof arguments[arguments.length-1]&&arguments[arguments.length-1],this._httpRequester.request(2,s,JSON.stringify(l),(function(e,t){if(a){if(e)return void a(e,null);if(200!==t.statusCode)return void a(new n.CodePushHttpError(t.statusCode+": "+t.body),null);a(null,null)}}))},e.prototype.reportStatusDownload=function(e,t){var r=this._serverUrl+this._publicPrefixUrl+"report_status/download",i={client_unique_id:this._clientUniqueId,deployment_key:this._deploymentKey,label:e.label};this._httpRequester.request(2,r,JSON.stringify(i),(function(e,r){if(t){if(e)return void t(e,null);if(200!==r.statusCode)return void t(new n.CodePushHttpError(r.statusCode+": "+r.body),null);t(null,null)}}))},e}();t.Pe=o},639:function(e,t){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CodePushUnauthorizedError=t.CodePushPackageError=t.CodePushDeployStatusError=t.CodePushHttpError=t.CodePushError=void 0;var i=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);t.CodePushError=i;var o=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(i);t.CodePushHttpError=o;var a=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(i);t.CodePushDeployStatusError=a;var s=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(i);t.CodePushPackageError=s;var l=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(i);t.CodePushUnauthorizedError=l}},n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,i),t.exports}i.m=r,i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="thin-javascript-layer:",i.l=(r,n,o)=>{if(e[r])e[r].push(n);else{var a,s;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[n];var u=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),s&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={179:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,i)=>{n=e[t]=[r,i]}));r.push(n[2]=o);var a=i.p+i.u(t),s=new Error;i.l(a,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}}),"chunk-"+t)}};var t=(t,r)=>{for(var n,o,[a,s,l]=r,c=0,d=[];c<a.length;c++)o=a[c],i.o(e,o)&&e[o]&&d.push(e[o][0]),e[o]=0;for(n in s)i.o(s,n)&&(i.m[n]=s[n]);for(l&&l(i),t&&t(r);d.length;)d.shift()()},r=self.webpackChunkthin_javascript_layer=self.webpackChunkthin_javascript_layer||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e,t=i(75);class r{static copyUnassignedMembers(e,t){for(let r in e)void 0!==t[r]&&null!==t[r]||(t[r]=e[r])}static getNodeStyleCallbackFor(e,t){return(r,n)=>{r?t&&t(r):e&&e(n)}}static getErrorMessage(e){return e&&e.message||e&&e.toString()||""}static logMessage(e){console.log(r.TAG+" "+e)}static logError(e,t){const n=`${e||""} ${r.getErrorMessage(t)}`,i=t&&t.stack?`. StackTrace: ${t.stack}`:"";console.error(`${r.TAG} ${n}${i}`)}}r.TAG="[CodePush]",r.invokeErrorCallback=(e,t)=>{r.logError(null,e),t&&t(e)},r.throwError=e=>{throw r.logError(null,e),e},function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.ON_NEXT_RESTART=1]="ON_NEXT_RESTART",e[e.ON_NEXT_RESUME=2]="ON_NEXT_RESUME"}(e||(e={}));var n,o,a=i(895);!function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(n||(n={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(o||(o={}));const s=(0,a.fo)("Filesystem",{web:()=>i.e(176).then(i.bind(i,176)).then((e=>new e.FilesystemWeb))});var l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class c{static directoryExists(e,t){return l(this,void 0,void 0,(function*(){try{const r=yield s.stat({directory:e,path:t});return"directory"===r.type||"NSFileTypeDirectory"===r.type}catch(e){return!1}}))}static writeStringToDataFile(e,t,r,i){c.writeStringToFile(e,n.Data,t,r,i)}static fileExists(e,t){return l(this,void 0,void 0,(function*(){try{const r=yield s.stat({directory:e,path:t});return"file"===r.type||"NSFileTypeRegular"===r.type}catch(e){return!1}}))}static cleanDataDirectory(e){return l(this,void 0,void 0,(function*(){return(yield c.dataDirectoryExists(e))&&(yield c.deleteDataDirectory(e)),yield s.mkdir({directory:n.Data,path:e,recursive:!0}),(yield s.getUri({directory:n.Data,path:e})).uri}))}static getUri(e,t){return l(this,void 0,void 0,(function*(){return(yield s.getUri({directory:e,path:t})).uri}))}static getDataUri(e){return c.getUri(n.Data,e)}static dataDirectoryExists(e){return c.directoryExists(n.Data,e)}static copyDirectoryEntriesTo(e,t,r=[]){return l(this,void 0,void 0,(function*(){if(-1===r.indexOf(".DS_Store")&&r.push(".DS_Store"),-1===r.indexOf("__MACOSX")&&r.push("__MACOSX"),yield c.directoryExists(t.directory,t.path)){const{files:n}=yield s.readdir(e);for(let i=0;i<n.length;i++){const o=n[i];if(r.includes(o))continue;const a=e.path+"/"+o,s=t.path+"/"+o,l=Object.assign(Object.assign({},e),{path:a}),d=Object.assign(Object.assign({},t),{path:s});(yield c.directoryExists(l.directory,l.path))?yield c.copyDirectoryEntriesTo(l,d):yield c.copy(l,d)}}else yield c.copy(e,t)}))}static copy(e,t){return l(this,void 0,void 0,(function*(){yield s.copy({directory:e.directory,from:e.path,to:t.path,toDirectory:t.directory})}))}static deleteDataDirectory(e){return l(this,void 0,void 0,(function*(){yield s.rmdir({directory:n.Data,path:e,recursive:!0}).then((()=>null))}))}static deleteEntriesFromDataDirectory(e,t){return l(this,void 0,void 0,(function*(){for(const r of t){const t=e+"/"+r;if(yield c.fileExists(n.Data,t))try{yield s.deleteFile({directory:n.Data,path:t})}catch(e){console.log("Could not delete file: "+t)}}}))}static writeStringToFile(e,t,r,n,i){return l(this,void 0,void 0,(function*(){try{yield s.writeFile({directory:t,path:r,data:e,encoding:o.UTF8}),i(null,null)}catch(e){i(new Error("Could write the current package information file. Error code: "+e.code),null)}}))}static readFile(e,t){return l(this,void 0,void 0,(function*(){return(yield s.readFile({directory:e,path:t,encoding:o.UTF8})).data}))}static readDataFile(e){return c.readFile(n.Data,e)}}const d=(0,a.fo)("CodePush");var u=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class p{static getApplicationBuildTime(){return u(this,void 0,void 0,(function*(){try{return(yield d.getNativeBuildTime()).value}catch(e){throw new Error("Could not get application timestamp.")}}))}static getApplicationVersion(){return u(this,void 0,void 0,(function*(){try{return(yield d.getAppVersion()).value}catch(e){throw new Error("Could not get application version.")}}))}static getBinaryHash(){return u(this,void 0,void 0,(function*(){try{return(yield d.getBinaryHash()).value}catch(e){throw new Error("Could not get binary hash.")}}))}static getServerURL(){return u(this,void 0,void 0,(function*(){try{return(yield d.getServerURL()).value}catch(e){return"https://codepush.appcenter.ms/"}}))}static getDeploymentKey(){return u(this,void 0,void 0,(function*(){try{return(yield d.getDeploymentKey()).value}catch(e){throw new Error("Deployment key not found.")}}))}static isFailedUpdate(e){return u(this,void 0,void 0,(function*(){try{return(yield d.isFailedUpdate({packageHash:e})).value}catch(e){return!1}}))}static isFirstRun(e){return u(this,void 0,void 0,(function*(){try{return(yield d.isFirstRun({packageHash:e})).value}catch(e){return!1}}))}static isPendingUpdate(){return u(this,void 0,void 0,(function*(){try{return(yield d.isPendingUpdate()).value}catch(e){return!1}}))}}class h{}const g=(0,a.fo)("Http",{web:()=>i.e(592).then(i.bind(i,592)).then((e=>new e.HttpWeb)),electron:()=>i.e(592).then(i.bind(i,592)).then((e=>new e.HttpWeb))});class y{constructor(e){this.contentType=e}request(e,t,r,n){var i,o=n;if(o||"function"!=typeof r||(o=r),"string"==typeof r&&(i=r),"string"==typeof i)try{i=JSON.parse(i)}catch(e){}var a=this.getHttpMethodName(e);if(null===a)return o(new Error("Method Not Allowed"),null);const s={"X-CodePush-Plugin-Name":"cordova-plugin-code-push","X-CodePush-Plugin-Version":"1.11.13","X-CodePush-SDK-Version":"3.1.5"};this.contentType&&(s["Content-Type"]=this.contentType);const l={method:a,url:t,headers:s};"GET"===a?l.params=i:l.data=i,g.request(l).then((e=>{"object"==typeof e.data&&(e.data=JSON.stringify(e.data));var t={statusCode:e.status,body:e.data};o&&o(null,t)}))}getHttpMethodName(e){switch(e){case 0:return"GET";case 4:return"DELETE";case 1:return"HEAD";case 8:return"PATCH";case 2:return"POST";case 3:return"PUT";case 5:case 6:case 7:default:return null}}}const f=(0,a.fo)("Device",{web:()=>i.e(961).then(i.bind(i,961)).then((e=>new e.DeviceWeb))});var v=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class m{static getAcquisitionManager(e,r){return v(this,void 0,void 0,(function*(){const n=()=>{if(e!==m.DefaultConfiguration.deploymentKey||r){var n={deploymentKey:e||m.DefaultConfiguration.deploymentKey,serverUrl:m.DefaultConfiguration.serverUrl,ignoreAppVersion:m.DefaultConfiguration.ignoreAppVersion,appVersion:m.DefaultConfiguration.appVersion,clientUniqueId:m.DefaultConfiguration.clientUniqueId},i=new y(r),o=new t.Pe(i,n);return Promise.resolve(o)}return m.DefaultConfiguration.deploymentKey?Promise.resolve(m.DefaultAcquisitionManager):Promise.reject(new Error("No deployment key provided, please provide a default one in your config.xml or specify one in the call to checkForUpdate() or sync()."))};if(m.DefaultAcquisitionManager)return n();{let e=null;try{e=yield p.getServerURL()}catch(e){throw new Error("Could not get the CodePush configuration. Please check your config.xml file.")}let r=null;try{r=yield p.getApplicationVersion()}catch(e){throw new Error("Could not get the app version. Please check your config.xml file.")}let i=null;try{i=yield p.getDeploymentKey()}catch(e){}const o=yield f.getInfo();return m.DefaultConfiguration={deploymentKey:i,serverUrl:e,ignoreAppVersion:!1,appVersion:r,clientUniqueId:o.uuid},i&&(m.DefaultAcquisitionManager=new t.Pe(new y,m.DefaultConfiguration)),n()}}))}static reportStatusDeploy(e,t,r,n,i,o){return v(this,void 0,void 0,(function*(){try{(yield m.getAcquisitionManager(r,"application/json")).reportStatusDeploy(e,t,n,i,o)}catch(e){o&&o(e)}}))}static reportStatusDownload(e,t,r){return v(this,void 0,void 0,(function*(){try{(yield m.getAcquisitionManager(t,"application/json")).reportStatusDownload(e,r)}catch(e){r&&r(new Error("An error occured while reporting the download status. "+e))}}))}}var w=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class D extends h{install(e){return w(this,void 0,void 0,(function*(){return new Promise(((n,i)=>w(this,void 0,void 0,(function*(){try{r.logMessage("Installing update"),e?r.copyUnassignedMembers(D.getDefaultInstallOptions(),e):e=D.getDefaultInstallOptions();var o=e=>{r.invokeErrorCallback(e,i),m.reportStatusDeploy(this,t.rH.DeploymentFailed,this.deploymentKey)};let a;try{a=yield c.cleanDataDirectory(D.DownloadUnzipDir)}catch(e){return void o(e)}try{yield d.unzip({zipFile:this.localPath,targetDirectory:a})}catch(e){return void o(new Error("Could not unzip package"+r.getErrorMessage(e)))}try{const t=D.VersionsDir+"/"+this.packageHash,r=yield D.handleDeployment(t);yield this.verifyPackage(r),this.localPath=r.deployDir,this.finishInstall(r.deployDir,e,n,o)}catch(e){o(e)}}catch(e){o&&o(new Error("An error occured while installing the package. "+r.getErrorMessage(e)))}}))))}))}verifyPackage(e){return new Promise(((t,n)=>{var i,o,a=e.deployDir,s=e=>{n(e)},l=(i,o,l,c)=>{i?o?this.verifyHash(a,this.packageHash,s,(()=>{this.verifySignature(a,this.packageHash,l,c,s,t)})):n(new Error("Error! Public key was provided but there is no JWT signature within app bundle to verify. Possible reasons, why that might happen: \n1. You've been released CodePush bundle update using version of CodePush CLI that is not support code signing.\n2. You've been released CodePush bundle update without providing --privateKeyPath option.")):o?(r.logMessage("Warning! JWT signature exists in codepush update but code integrity check couldn't be performed because there is no public key configured. Please ensure that public key is properly configured within your application."),this.verifyHash(a,this.packageHash,s,t)):e.isDiffUpdate?this.verifyHash(a,this.packageHash,s,t):t()};e.isDiffUpdate?r.logMessage("Applying diff update"):r.logMessage("Applying full update"),this.getPublicKey(((t,r)=>{t?n(new Error("Error reading public key. "+t)):(i=!!(o=r),this.getSignatureFromUpdate(e.deployDir,((e,t)=>{e?n(new Error("Error reading signature from update. "+e)):l(i,!!t,o,t)})))}))}))}getPublicKey(e){d.getPublicKey().then((t=>{return r=t.value||null,void e(null,r);var r}),(t=>{e(t,null)}))}getSignatureFromUpdate(e,t){return w(this,void 0,void 0,(function*(){const r=e+"/www/.codepushrelease";if(yield c.fileExists(n.Data,r))try{const e=yield c.readFile(n.Data,r);t(null,e)}catch(e){t(e,null)}else t(null,null)}))}verifyHash(e,t,n,i){r.logMessage("Verifying hash for folder path: "+e),d.getPackageHash({path:e}).then((e=>{e.value===t?(r.logMessage("The update contents succeeded the data integrity check."),i()):n(new Error("The update contents failed the data integrity check."))}),(e=>{n(new Error("Unable to compute hash for package: "+e))}))}verifySignature(e,t,n,i,o,a){r.logMessage("Verifying signature for folder path: "+e),d.decodeSignature({publicKey:n,signature:i}).then((e=>{e.value===t?(r.logMessage("The update contents succeeded the code signing check."),a()):o(new Error("The update contents failed the code signing check."))}),(e=>{o(new Error("Unable to verify signature for package: "+e))}))}finishInstall(t,n,i,o){D.getCurrentOrDefaultPackage().then((a=>{!function(e){w(this,void 0,void 0,(function*(){if(yield p.isPendingUpdate())e(0);else try{yield D.backupPackageInformationFile(),e(0)}catch(t){e(0)}}))}((a=>{this.writeNewPackageMetadata().then((()=>{var a=()=>{r.logMessage("Install succeeded.");var a=this.isMandatory?n.mandatoryInstallMode:n.installMode;a===e.IMMEDIATE?(i&&i(a),d.install({startLocation:t,installMode:a,minimumBackgroundDuration:n.minimumBackgroundDuration})):d.install({startLocation:t,installMode:a,minimumBackgroundDuration:n.minimumBackgroundDuration}).then((()=>{i&&i(a)}),(()=>{o&&o()}))};d.preInstall({startLocation:t}).then((()=>{a()}),(e=>{r.logError("Preinstall failure.",e);var t=new Error("An error has occured while installing the package. "+r.getErrorMessage(e));o&&o(t)}))}),(e=>{o&&o(e)}))}))}),o)}static handleDeployment(e){return w(this,void 0,void 0,(function*(){const t={directory:n.Data,path:D.DownloadUnzipDir+"/"+D.DiffManifestFile},r=yield c.fileExists(t.directory,t.path);return(yield c.directoryExists(n.Data,D.VersionsDir))||(yield s.mkdir({path:D.VersionsDir,directory:n.Data,recursive:!0})),r?yield D.handleDiffDeployment(e,t):yield D.handleCleanDeployment(e),{deployDir:e,isDiffUpdate:r}}))}writeNewPackageMetadata(){return w(this,void 0,void 0,(function*(){const e=yield p.getApplicationBuildTime().catch((e=>{r.logError("Could not get application build time. "+e)})),t=yield p.getApplicationVersion().catch((e=>{r.logError("Could not get application version."+e)})),n={nativeBuildTime:e,localPath:this.localPath,appVersion:t,deploymentKey:this.deploymentKey,description:this.description,isMandatory:this.isMandatory,packageSize:this.packageSize,label:this.label,packageHash:this.packageHash,isFirstRun:!1,failedInstall:!1,install:void 0};return new Promise(((e,t)=>{D.writeCurrentPackageInformation(n,(r=>r?t(r):e()))}))}))}static handleCleanDeployment(e){return w(this,void 0,void 0,(function*(){const t={directory:n.Data,path:D.DownloadUnzipDir},r={directory:n.Data,path:e};return c.copyDirectoryEntriesTo(t,r)}))}static copyCurrentPackage(e,t){return w(this,void 0,void 0,(function*(){const r=yield new Promise((e=>{D.getPackage(D.PackageInfoFile,(t=>e(t.localPath)),(()=>e()))}));e=r?e:e+"/www";const i=r?{directory:n.Data,path:r}:{directory:n.Data,path:"www"},o={directory:n.Data,path:e};return c.copyDirectoryEntriesTo(i,o,t)}))}static handleDiffDeployment(e,t){return w(this,void 0,void 0,(function*(){let r;try{yield D.copyCurrentPackage(e,[".codepushrelease"]),yield D.handleCleanDeployment(e);const n=yield c.readFile(t.directory,t.path);r=JSON.parse(n),yield c.deleteEntriesFromDataDirectory(e,r.deletedFiles)}catch(e){throw new Error("Cannot perform diff-update.")}}))}static writeCurrentPackageInformation(e,t){var r=JSON.stringify(e);c.writeStringToDataFile(r,D.RootDir+"/"+D.PackageInfoFile,!0,t)}static backupPackageInformationFile(){return w(this,void 0,void 0,(function*(){const e={directory:n.Data,path:D.RootDir+"/"+D.PackageInfoFile},t={directory:n.Data,path:D.RootDir+"/"+D.OldPackageInfoFile};return c.copy(e,t)}))}static getOldPackage(e,t){D.getPackage(D.OldPackageInfoFile,e,t)}static getPackage(e,t,n){return w(this,void 0,void 0,(function*(){try{const r=yield c.readDataFile(D.RootDir+"/"+e),i=JSON.parse(r);D.getLocalPackageFromMetadata(i).then(t,n)}catch(e){(e=>{n&&n(new Error("Cannot read package information. "+r.getErrorMessage(e)))})(e)}}))}static getLocalPackageFromMetadata(e){return w(this,void 0,void 0,(function*(){if(!e)throw new Error("Invalid package metadata.");const t=yield p.isFailedUpdate(e.packageHash),r=yield p.isFirstRun(e.packageHash),n=new D;return n.appVersion=e.appVersion,n.deploymentKey=e.deploymentKey,n.description=e.description,n.isMandatory=e.isMandatory,n.failedInstall=t,n.isFirstRun=r,n.label=e.label,n.localPath=e.localPath,n.packageHash=e.packageHash,n.packageSize=e.packageSize,n}))}static getCurrentOrDefaultPackage(){return D.getPackageInfoOrDefault(D.PackageInfoFile)}static getOldOrDefaultPackage(){return w(this,void 0,void 0,(function*(){return D.getPackageInfoOrDefault(D.OldPackageInfoFile)}))}static getPackageInfoOrDefault(e){return w(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{D.getPackage(e,t,(()=>w(this,void 0,void 0,(function*(){let e;try{e=yield p.getApplicationVersion()}catch(e){return r.logError("Could not get application version."+e),void n(e)}const i=new D;i.appVersion=e;try{i.packageHash=yield p.getBinaryHash()}catch(e){r.logError("Could not get binary hash."+e)}t(i)}))))}))}))}static getPackageInfoOrNull(e,t,r){D.getPackage(e,t,t.bind(null,null))}static getDefaultInstallOptions(){return D.DefaultInstallOptions||(D.DefaultInstallOptions={installMode:e.ON_NEXT_RESTART,minimumBackgroundDuration:0,mandatoryInstallMode:e.IMMEDIATE}),D.DefaultInstallOptions}}D.RootDir="codepush",D.DownloadDir=D.RootDir+"/download",D.DownloadUnzipDir=D.DownloadDir+"/unzipped",D.DeployDir=D.RootDir+"/deploy",D.VersionsDir=D.DeployDir+"/versions",D.PackageUpdateFileName="update.zip",D.PackageInfoFile="currentPackage.json",D.OldPackageInfoFile="oldPackage.json",D.DiffManifestFile="hotcodepush.json";var E,b=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class P extends h{constructor(){super(...arguments),this.isDownloading=!1}download(e){return b(this,void 0,void 0,(function*(){r.logMessage("Downloading update"),this.downloadUrl||r.throwError(new Error("The remote package does not contain a download URL.")),this.isDownloading=!0;const e=D.DownloadDir+"/"+D.PackageUpdateFileName,t=yield c.getUri(n.Data,e);try{(yield c.directoryExists(n.Data,D.DownloadDir))||(yield s.mkdir({path:D.DownloadDir,directory:n.Data,recursive:!0})),(yield c.fileExists(n.Data,e))&&(yield s.deleteFile({directory:n.Data,path:e})),yield g.downloadFile({url:this.downloadUrl,method:"GET",filePath:e,fileDirectory:n.Data,responseType:"blob"})}catch(e){r.throwError(new Error((e&&e.message,e.message)))}finally{this.isDownloading=!1}const i=yield p.isFailedUpdate(this.packageHash),o=new D;return o.deploymentKey=this.deploymentKey,o.description=this.description,o.label=this.label,o.appVersion=this.appVersion,o.isMandatory=this.isMandatory,o.packageHash=this.packageHash,o.isFirstRun=!1,o.failedInstall=i,o.localPath=t,r.logMessage("Package download success: "+JSON.stringify(o)),m.reportStatusDownload(o,o.deploymentKey),o}))}abortDownload(){return b(this,void 0,void 0,(function*(){return new Promise((e=>{this.isDownloading=!1,e()}))}))}}!function(e){e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.UPDATE_INSTALLED=1]="UPDATE_INSTALLED",e[e.UPDATE_IGNORED=2]="UPDATE_IGNORED",e[e.ERROR=3]="ERROR",e[e.IN_PROGRESS=4]="IN_PROGRESS",e[e.CHECKING_FOR_UPDATE=5]="CHECKING_FOR_UPDATE",e[e.AWAITING_USER_ACTION=6]="AWAITING_USER_ACTION",e[e.DOWNLOADING_PACKAGE=7]="DOWNLOADING_PACKAGE",e[e.INSTALLING_UPDATE=8]="INSTALLING_UPDATE"}(E||(E={}));const k=(0,a.fo)("Dialog",{web:()=>i.e(674).then(i.bind(i,674)).then((e=>new e.DialogWeb))});var _,U=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class O{notifyApplicationReady(){return d.notifyApplicationReady()}restartApplication(){return d.restartApplication()}reportStatus(e,n,i,o,a,s){if((n||i!==a)&&n!==a||o!==s){var l=(e,t)=>({label:e,appVersion:t,deploymentKey:o,description:null,isMandatory:!1,packageHash:null,packageSize:null,failedInstall:!1}),c=t=>{var l={status:e,label:n,appVersion:i,deploymentKey:o,lastVersionLabelOrAppVersion:a,lastVersionDeploymentKey:s};t?(r.logError(`An error occurred while reporting status: ${JSON.stringify(l)}`,t),d.reportFailed({statusReport:l})):(r.logMessage(`Reported status: ${JSON.stringify(l)}`),d.reportSucceeded({statusReport:l}))};switch(e){case _.STORE_VERSION:m.reportStatusDeploy(null,t.rH.DeploymentSucceeded,o,a,s,c);break;case _.UPDATE_CONFIRMED:m.reportStatusDeploy(l(n,i),t.rH.DeploymentSucceeded,o,a,s,c);break;case _.UPDATE_ROLLED_BACK:m.reportStatusDeploy(l(n,i),t.rH.DeploymentFailed,o,a,s,c)}}}getCurrentPackage(){return U(this,void 0,void 0,(function*(){var e=(yield p.isPendingUpdate())?D.OldPackageInfoFile:D.PackageInfoFile;return new Promise(((t,r)=>{D.getPackageInfoOrNull(e,t,r)}))}))}getPendingPackage(){return U(this,void 0,void 0,(function*(){return(yield p.isPendingUpdate())?new Promise(((e,t)=>{D.getPackageInfoOrNull(D.PackageInfoFile,e,t)})):null}))}checkForUpdate(e,t,n){try{var i=(i,o)=>U(this,void 0,void 0,(function*(){if(i)r.invokeErrorCallback(i,t);else{var a=()=>{r.logMessage("App is up to date."),e&&e(null)};if(o)if(o.updateAppVersion)r.logMessage("An update is available, but it is targeting a newer binary version than you are currently running."),a();else{var s=o;const t=yield p.isFailedUpdate(s.packageHash);var l=new P;l.appVersion=s.appVersion,l.deploymentKey=n,l.description=s.description,l.downloadUrl=s.downloadUrl,l.isMandatory=s.isMandatory,l.label=s.label,l.packageHash=s.packageHash,l.packageSize=s.packageSize,l.failedInstall=t,r.logMessage("An update is available. "+JSON.stringify(l)),e&&e(l)}else a()}})),o=()=>U(this,void 0,void 0,(function*(){try{const e=yield m.getAcquisitionManager(n);D.getCurrentOrDefaultPackage().then((t=>U(this,void 0,void 0,(function*(){try{const e=yield p.getApplicationVersion();t.appVersion=e}catch(e){}r.logMessage("Checking for update."),e.queryUpdateWithCurrentPackage(t,i)}))),(e=>{r.invokeErrorCallback(e,t)}))}catch(e){r.invokeErrorCallback(e,t)}}));n?o():p.getDeploymentKey().then((e=>{n=e,o()}),(e=>{r.invokeErrorCallback(e,t)}))}catch(e){r.invokeErrorCallback(new Error("An error occurred while querying for updates."+r.getErrorMessage(e)),t)}}sync(e,t){return U(this,void 0,void 0,(function*(){return O.SyncInProgress?(r.logMessage("Sync already in progress."),E.IN_PROGRESS):new Promise(((r,n)=>{O.SyncInProgress=!0,this.syncInternal(((e,t)=>{switch(t){case E.ERROR:case E.IN_PROGRESS:case E.UP_TO_DATE:case E.UPDATE_IGNORED:case E.UPDATE_INSTALLED:O.SyncInProgress=!1}e&&n(e),r(t)}),e,t)}))}))}syncInternal(t,n,i){if(n){var o=this.getDefaultUpdateDialogOptions();n.updateDialog&&(typeof n.updateDialog!=typeof{}?n.updateDialog=o:r.copyUnassignedMembers(o,n.updateDialog));var a=this.getDefaultSyncOptions();r.copyUnassignedMembers(a,n)}else n=this.getDefaultSyncOptions();this.notifyApplicationReady();var s=e=>{r.logError("An error occurred during sync.",e),t&&t(e,E.ERROR)},l=i=>{switch(i){case e.ON_NEXT_RESTART:r.logMessage("Update is installed and will be run on the next app restart.");break;case e.ON_NEXT_RESUME:n.minimumBackgroundDuration>0?r.logMessage(`Update is installed and will be run after the app has been in the background for at least ${n.minimumBackgroundDuration} seconds.`):r.logMessage("Update is installed and will be run when the app next resumes.")}t&&t(null,E.UPDATE_INSTALLED)},c=e=>{t&&t(null,E.INSTALLING_UPDATE),e.install(n).then(l,s)},d=e=>{t&&t(null,E.DOWNLOADING_PACKAGE),e.download(i).then(c,s)};t&&t(null,E.CHECKING_FOR_UPDATE),this.checkForUpdate((e=>U(this,void 0,void 0,(function*(){var i=e&&e.failedInstall&&n.ignoreFailedUpdates;if(!e||i)i&&r.logMessage("An update is available, but it is being ignored due to have been previously rolled back."),t&&t(null,E.UP_TO_DATE);else{var o=n.updateDialog;if(o&&(r.logMessage("Awaiting user action."),t&&t(null,E.AWAITING_USER_ACTION)),e.isMandatory&&n.updateDialog){var a=o.appendReleaseDescription?o.mandatoryUpdateMessage+o.descriptionPrefix+e.description:o.mandatoryUpdateMessage;yield k.alert({message:a,title:o.updateTitle,buttonTitle:o.mandatoryContinueButtonLabel}),d(e)}else!e.isMandatory&&n.updateDialog?(a=o.appendReleaseDescription?o.optionalUpdateMessage+o.descriptionPrefix+e.description:o.optionalUpdateMessage,(yield k.confirm({message:a,title:o.updateTitle,okButtonTitle:o.optionalInstallButtonLabel,cancelButtonTitle:o.optionalIgnoreButtonLabel})).value?d(e):(r.logMessage("User cancelled the update."),t&&t(null,E.UPDATE_IGNORED))):d(e)}}))),s,n.deploymentKey)}getDefaultSyncOptions(){return O.DefaultSyncOptions||(O.DefaultSyncOptions={ignoreFailedUpdates:!0,installMode:e.ON_NEXT_RESTART,minimumBackgroundDuration:0,mandatoryInstallMode:e.IMMEDIATE,updateDialog:!1,deploymentKey:void 0}),O.DefaultSyncOptions}getDefaultUpdateDialogOptions(){return O.DefaultUpdateDialogOptions||(O.DefaultUpdateDialogOptions={updateTitle:"Update available",mandatoryUpdateMessage:"An update is available that must be installed.",mandatoryContinueButtonLabel:"Continue",optionalUpdateMessage:"An update is available. Would you like to install it?",optionalInstallButtonLabel:"Install",optionalIgnoreButtonLabel:"Ignore",appendReleaseDescription:!1,descriptionPrefix:" Description: "}),O.DefaultUpdateDialogOptions}}!function(e){e[e.STORE_VERSION=0]="STORE_VERSION",e[e.UPDATE_CONFIRMED=1]="UPDATE_CONFIRMED",e[e.UPDATE_ROLLED_BACK=2]="UPDATE_ROLLED_BACK"}(_||(_={}));const S=new O;window.codePush=S,S.sync()})()})();